(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{10:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(19),i=c.n(n),s=c(8),r=(c(10),c(1)),o=function(){var e=Object(a.useRef)(),t=Object(a.useContext)(v),c=t.state,n=c.inputValue,i=c.editingCity,s=t.dispatch;return Object(r.jsxs)("div",{className:"InputWrap",children:[Object(r.jsx)("input",{className:"Input",onChange:function(e){s({type:"CHANGE_INPUT_VALUE",payload:e.target.value})},value:n,ref:e}),i?Object(r.jsx)("button",{className:"Button",onClick:function(t){n.length&&(s({type:"EDIT_CITY_DONE",payload:n}),s({type:"RESET_INPUT_VALUE"}),e.current.focus())},children:"Edit"}):Object(r.jsx)("button",{className:"Button",onClick:function(t){n.length&&(s({type:"ADD_CITY",payload:n}),s({type:"RESET_INPUT_VALUE"}),e.current.focus())},children:"+"})]})},l="145b9eeeb88b3b9ef40945480a90519e",j=c(2),u=c(12),d=Object(a.memo)((function(e){var t=e.city,c=e.setCityCoord,n=function(e){var t=Object(a.useState)(null),c=Object(s.a)(t,2),n=c[0],i=c[1];return Object(a.useEffect)((function(){fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat(l,"&units=metric")).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[e]),n}(t),i=Object(j.e)(),o=Boolean(Object(j.g)("/home")),d=Object(a.useContext)(v).dispatch;if(Object(a.useEffect)((function(){n&&n.coord.lat&&n.coord.lon&&c&&c({lat:n.coord.lat,lon:n.coord.lon})}),[n,c]),!n)return null;var b=n.name,O=n.weather,p=n.main,h=O[0],m=h.description,x=h.icon,f=p.temp,y=p.humidity,N=p.feels_like;return o?Object(r.jsxs)("div",{className:"Card",children:[Object(r.jsxs)("div",{className:"ActionButtonWrap",children:[Object(r.jsx)("button",{onClick:function(){d({type:"EDIT_CITY",payload:t})},className:"ActionButton",children:"Edit"}),Object(r.jsx)("button",{onClick:function(){d({type:"DELETE_CITY",payload:t})},className:"ActionButton",children:"X"})]}),Object(r.jsxs)(u.b,{to:"/city/".concat(t.toLowerCase()),className:"Card__wrap",children:[Object(r.jsxs)("div",{className:"MainInfo",children:[Object(r.jsx)("img",{className:"Icon",src:"http://openweathermap.org/img/wn/".concat(x,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"Title",children:b}),Object(r.jsx)("div",{className:"Description",children:m}),Object(r.jsx)("div",{className:"Temperature TemperatureIcon",children:f.toFixed()})]}),Object(r.jsxs)("div",{className:"Information",children:[Object(r.jsxs)("div",{children:["Humidity: ",y]}),Object(r.jsxs)("div",{children:["Feels like: ",N]})]})]})]}):Object(r.jsxs)("div",{className:"Card",children:[Object(r.jsx)("div",{className:"ActionButtonWrap",children:Object(r.jsx)("button",{onClick:function(){i.goBack()},className:"ActionButton",children:"Back"})}),Object(r.jsxs)("div",{className:"MainInfo",children:[Object(r.jsx)("img",{className:"Icon",src:"http://openweathermap.org/img/wn/".concat(x,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"Title",children:b}),Object(r.jsx)("div",{className:"Description",children:m}),Object(r.jsx)("div",{className:"Temperature TemperatureIcon",children:f.toFixed()})]}),Object(r.jsxs)("div",{className:"Information",children:[Object(r.jsxs)("div",{children:["Humidity: ",y]}),Object(r.jsxs)("div",{children:["Feels like: ",N]})]})]})})),b=function(){var e=Object(a.useContext)(v).state.citiesList,t=Object(a.useState)("asc"),c=Object(s.a)(t,2),n=c[0],i=c[1],o=e.sort();"asc"===n&&o.reverse();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("select",{className:"Select",defaultValue:n,onChange:function(e){i(e.target.value)},children:[Object(r.jsx)("option",{value:"asc",children:"By name asc"}),Object(r.jsx)("option",{value:"desc",children:"By name desc"})]}),Object(r.jsx)("div",{className:"CardList",children:o.map((function(e,t){return Object(r.jsx)(d,{city:e},t)}))})]})},O=c(18),p=c(7),h={inputValue:"",editingCity:"",citiesList:JSON.parse(localStorage.getItem("citiesList"))||[]},m=function(e,t){switch(t.type){case"ADD_CITY":return Object(p.a)(Object(p.a)({},e),{},{citiesList:[].concat(Object(O.a)(e.citiesList),[t.payload])});case"DELETE_CITY":return Object(p.a)(Object(p.a)({},e),{},{citiesList:e.citiesList.filter((function(e){return e!==t.payload}))});case"EDIT_CITY":return Object(p.a)(Object(p.a)({},e),{},{inputValue:t.payload,editingCity:t.payload});case"EDIT_CITY_DONE":var c=e.citiesList.filter((function(t){return t!==e.editingCity}));return Object(p.a)(Object(p.a)({},e),{},{citiesList:[].concat(Object(O.a)(c),[t.payload]),inputValue:"",editingCity:""});case"CHANGE_INPUT_VALUE":return Object(p.a)(Object(p.a)({},e),{},{inputValue:t.payload});case"RESET_INPUT_VALUE":return Object(p.a)(Object(p.a)({},e),{},{inputValue:""});default:return e}},x=function(e){var t=e.daily,c=t.dt,a=t.weather,n=t.temp.day,i=a[0],s=i.main,o=i.icon,l=new Date(1e3*c);return Object(r.jsxs)("div",{className:"DailyCard",children:[Object(r.jsx)("div",{children:l.toString().split(" ")[0]}),Object(r.jsx)("img",{className:"Icon",src:"http://openweathermap.org/img/wn/".concat(o,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"TemperatureIcon",children:n.toFixed(0)}),Object(r.jsx)("div",{children:s})]})},f=function(){var e=Object(j.f)().city,t=Object(a.useState)(null),c=Object(s.a)(t,2),n=c[0],i=c[1],o=function(e){var t=Object(a.useState)(null),c=Object(s.a)(t,2),n=c[0],i=c[1];return Object(a.useEffect)((function(){if(null!==e){var t=e.lat,c=e.lon;fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(c,"&appid=").concat(l,"&units=metric")).then((function(e){return e.json()})).then((function(e){return i(e)}))}}),[e]),n}(n);return Object(r.jsxs)("div",{className:"SingleCityWrap",children:[Object(r.jsx)(d,{city:e,setCityCoord:i}),o&&Object(r.jsx)("div",{className:"DailyCards",children:o.daily.map((function(e,t){return Object(r.jsx)(x,{daily:e},t)}))})]})},v=Object(a.createContext)();var y=function(){var e=function(){var e=Object(a.useReducer)(m,h),t=Object(s.a)(e,2),c=t[0],n=t[1],i=c.citiesList;return Object(a.useEffect)((function(){localStorage.setItem("citiesList",JSON.stringify(i))}),[i]),[c,n]}(),t=Object(s.a)(e,2),c=t[0],n=t[1];return Object(r.jsx)(u.a,{children:Object(r.jsx)(v.Provider,{value:{state:c,dispatch:n},children:Object(r.jsxs)("div",{className:"Main",children:[Object(r.jsxs)(j.a,{path:"/home",children:[Object(r.jsx)(o,{}),Object(r.jsx)(b,{})]}),Object(r.jsx)(j.a,{path:"/city/:city",children:Object(r.jsx)(f,{})})]})})})};i.a.render(Object(r.jsx)(y,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.8e9b9f7c.chunk.js.map
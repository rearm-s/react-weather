(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{10:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var a=c(0),i=c(19),n=c.n(i),s=c(8),r=(c(10),c(1)),l=function(){var e=Object(a.useRef)(),t=Object(a.useContext)(y),c=t.state,i=c.inputValue,n=c.editingCity,s=c.citiesList,l=t.dispatch;return Object(r.jsxs)("div",{className:"inputWrap",children:[Object(r.jsx)("input",{className:"input",onChange:function(e){l({type:"CHANGE_INPUT_VALUE",payload:e.target.value})},value:i,ref:e,placeholder:"Type your city here, for example - Kyiv"}),n?Object(r.jsx)("button",{className:"button",onClick:function(){i.length&&(l({type:"EDIT_CITY_DONE",payload:i}),l({type:"RESET_INPUT_VALUE"}),e.current.focus())},children:"Edit"}):Object(r.jsx)("button",{className:"button",onClick:function(){i.length&&!s.includes(i)&&(l({type:"ADD_CITY",payload:i}),l({type:"RESET_INPUT_VALUE"}),e.current.focus()),s.includes(i)&&alert("This city added yet")},children:"Add city"})]})},o="145b9eeeb88b3b9ef40945480a90519e",j=c(2),d=c(12),u=Object(a.memo)((function(e){var t=e.city,c=e.setCityCoord,i=function(e){var t=Object(a.useState)(null),c=Object(s.a)(t,2),i=c[0],n=c[1];return Object(a.useEffect)((function(){try{fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat(o,"&units=metric")).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(e){return alert("some error")}))}catch(t){alert("error")}}),[e]),"404"===(null===i||void 0===i?void 0:i.cod)?null:i}(t),n=Object(j.f)(),l=Object(j.g)(),u=Object(a.useContext)(y).dispatch;if(Object(a.useEffect)((function(){i&&i.coord.lat&&i.coord.lon&&c&&c({lat:i.coord.lat,lon:i.coord.lon})}),[i,c]),!i)return null;var b=i.name,O=i.weather,p=i.main,h=O[0],m=h.description,x=h.icon,f=p.temp,v=p.humidity,N=p.feels_like;return"/"===l.pathname?Object(r.jsxs)("div",{className:"card",children:[Object(r.jsxs)(d.b,{to:"/city/".concat(t.toLowerCase()),className:"card__wrap",children:[Object(r.jsxs)("div",{className:"mainInfo",children:[Object(r.jsx)("img",{className:"icon",src:"http://openweathermap.org/img/wn/".concat(x,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"title",children:b}),Object(r.jsx)("div",{className:"description",children:m}),Object(r.jsx)("div",{className:"temperature temperatureIcon",children:f.toFixed()})]}),Object(r.jsxs)("div",{className:"information",children:[Object(r.jsxs)("div",{children:["Humidity: ",v]}),Object(r.jsxs)("div",{children:["Feels like: ",N]})]})]}),Object(r.jsxs)("div",{className:"actionButtonWrap",children:[Object(r.jsx)("button",{onClick:function(){u({type:"EDIT_CITY",payload:t})},className:"actionButton",children:"Edit"}),Object(r.jsx)("button",{onClick:function(){u({type:"DELETE_CITY",payload:t})},className:"actionButton",children:"Delete"})]})]}):Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"actionButtonWrap",children:Object(r.jsx)("button",{onClick:function(){n.goBack()},className:"actionButton",children:"Back"})}),Object(r.jsxs)("div",{className:"mainInfo",children:[Object(r.jsx)("img",{className:"icon",src:"http://openweathermap.org/img/wn/".concat(x,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"title",children:b}),Object(r.jsx)("div",{className:"description",children:m}),Object(r.jsx)("div",{className:"temperature temperatureIcon",children:f.toFixed()})]}),Object(r.jsxs)("div",{className:"information",children:[Object(r.jsxs)("div",{children:["Humidity: ",v]}),Object(r.jsxs)("div",{children:["Feels like: ",N]})]})]})})),b=function(){var e=Object(a.useContext)(y).state.citiesList,t=Object(a.useState)("asc"),c=Object(s.a)(t,2),i=c[0],n=c[1],l=e.sort();"asc"===i&&l.reverse();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("select",{className:"select",defaultValue:i,onChange:function(e){n(e.target.value)},children:[Object(r.jsx)("option",{value:"asc",children:"By name asc"}),Object(r.jsx)("option",{value:"desc",children:"By name desc"})]}),Object(r.jsx)("div",{className:"cardList",children:l.map((function(e,t){return Object(r.jsx)(u,{city:e},t)}))})]})},O=c(15),p=c(4),h={inputValue:"",editingCity:"",citiesList:JSON.parse(localStorage.getItem("citiesList"))||[]},m=function(e,t){switch(t.type){case"ADD_CITY":case"ADD_AFTER":return Object(p.a)(Object(p.a)({},e),{},{citiesList:[].concat(Object(O.a)(e.citiesList),[t.payload])});case"DELETE_CITY":return Object(p.a)(Object(p.a)({},e),{},{citiesList:e.citiesList.filter((function(e){return e!==t.payload}))});case"EDIT_CITY":return Object(p.a)(Object(p.a)({},e),{},{inputValue:t.payload,editingCity:t.payload});case"EDIT_CITY_DONE":var c=e.citiesList.filter((function(t){return t!==e.editingCity}));return Object(p.a)(Object(p.a)({},e),{},{citiesList:[].concat(Object(O.a)(c),[t.payload]),inputValue:"",editingCity:""});case"CHANGE_INPUT_VALUE":return Object(p.a)(Object(p.a)({},e),{},{inputValue:t.payload});case"RESET_INPUT_VALUE":return Object(p.a)(Object(p.a)({},e),{},{inputValue:""});default:return e}},x=function(e){var t=e.daily,c=t.dt,a=t.weather,i=t.temp.day,n=a[0],s=n.main,l=n.icon,o=new Date(1e3*c);return Object(r.jsxs)("div",{className:"dailyCard",children:[Object(r.jsx)("div",{children:o.toString().split(" ")[0]}),Object(r.jsx)("img",{className:"icon",src:"http://openweathermap.org/img/wn/".concat(l,"@2x.png"),alt:"icon"}),Object(r.jsx)("div",{className:"temperatureIcon",children:i.toFixed(0)}),Object(r.jsx)("div",{children:s})]})},f=function(){var e=Object(j.h)().city,t=Object(a.useState)(null),c=Object(s.a)(t,2),i=c[0],n=c[1],l=function(e){var t=Object(a.useState)(null),c=Object(s.a)(t,2),i=c[0],n=c[1];return Object(a.useEffect)((function(){if(null!==e){var t=e.lat,c=e.lon;fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(c,"&appid=").concat(o,"&units=metric")).then((function(e){return e.json()})).then((function(e){return n(e)}))}}),[e]),i}(i);return Object(r.jsxs)("div",{className:"singleCityWrap",children:[Object(r.jsx)(u,{city:e,setCityCoord:n}),l&&Object(r.jsx)("div",{className:"dailyCards",children:l.daily.map((function(e,t){return Object(r.jsx)(x,{daily:e},t)}))})]})},y=Object(a.createContext)();var v=function(){var e=function(){var e=Object(a.useReducer)(m,h),t=Object(s.a)(e,2),c=t[0],i=t[1],n=c.citiesList;return Object(a.useEffect)((function(){localStorage.setItem("citiesList",JSON.stringify(n))}),[n]),[c,i]}(),t=Object(s.a)(e,2),c=t[0],i=t[1];return Object(r.jsx)(d.a,{basename:"/react-weather",children:Object(r.jsx)(y.Provider,{value:{state:c,dispatch:i},children:Object(r.jsx)("div",{className:"main",children:Object(r.jsxs)(j.c,{children:[Object(r.jsxs)(j.a,{exact:!0,path:"/",children:[Object(r.jsx)(l,{}),Object(r.jsx)(b,{})]}),Object(r.jsx)(j.a,{path:"/city/:city",children:Object(r.jsx)(f,{})})]})})})})};n.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.ef2c0134.chunk.js.map